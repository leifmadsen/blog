<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Voip on Asterisk, and other worldly endeavours</title>
    <link>http://blog.leifmadsen.com/tags/voip/</link>
    <description>Recent content in Voip on Asterisk, and other worldly endeavours</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 19 Mar 2010 16:28:28 +0000</lastBuildDate>
    <atom:link href="http://blog.leifmadsen.com/tags/voip/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Using a Nokia E71 with Asterisk (3G or WiFi)</title>
      <link>http://blog.leifmadsen.com/blog/2010/03/19/using-a-nokia-e71-with-asterisk-3g-or-wifi/</link>
      <pubDate>Fri, 19 Mar 2010 16:28:28 +0000</pubDate>
      
      <guid>http://blog.leifmadsen.com/blog/2010/03/19/using-a-nokia-e71-with-asterisk-3g-or-wifi/</guid>
      <description>&lt;p&gt;There was some talk in one of the IRC chat rooms today about someone trying to get their E61i working with Asterisk. I haven&amp;rsquo;t had an issue getting that phone or my E71 phone working, but regardless he was having issues. I figured I might as well spend a little bit of time today going through my configuration, both for my own reference, and so that other people can get their Nokia&amp;rsquo;s setup with Asterisk as well.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll be using the native SIP client, although I&amp;rsquo;ve had just as good of luck using the Fring application. The advantage to the Fring application is that you can use it with Skype, along with multiple IM clients, and also video! I especially like that the application makes use of the video camera on the front of the phone so that you can use it as a videophone. Using the video on a phone like the iPhone or Nexus One seems useless to me (but I digress!).&lt;/p&gt;

&lt;p&gt;First, lets get our Asterisk configuration setup in &lt;em&gt;sip.conf&lt;/em&gt;. We&amp;rsquo;ll need to make sure we&amp;rsquo;ve setup a &lt;strong&gt;realm&lt;/strong&gt; in &lt;em&gt;sip.conf&lt;/em&gt; as our phone will require it. If you don&amp;rsquo;t, then the default realm is &amp;lsquo;&lt;strong&gt;asterisk&lt;/strong&gt;&amp;rsquo;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;sip.conf&lt;/em&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[general]
realm=pbx.my_asterisk_box.com
disallow=all
allow=ulaw
allow=alaw
srvlookup=yes
pedantic=yes
maxexpiry=360
minexpiry=120
defaultexpirey=120
videosupport=yes

[leifmadsen_cell]
type=friend
secret=super_secret_password
context=devices
nat=yes
canreinvite=no
qualify=no
mailbox=100@default
callerid=Leif Madsen &amp;lt;571&amp;gt;
insecure=invite,port
subscribecontext=subscriptions
disallow=all
allow=g729
allow=ulaw
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Feel free to change or add whatever options you need for your &lt;em&gt;sip.conf&lt;/em&gt;. This is generally what I have working right now. I&amp;rsquo;ve left out all my domain handling and SIP URI stuff this time around. Maybe I&amp;rsquo;ll talk about it in another blog post in the future.&lt;/p&gt;

&lt;p&gt;OK, back to the task at hand. Now that we have our sip.conf file configured, just run &amp;lsquo;sip reload&amp;rsquo; from the Asterisk console, and your settings should be available. You can check to make sure your peer loads up with &amp;lsquo;&lt;strong&gt;sip show peers&lt;/strong&gt;&amp;rsquo; or &amp;lsquo;&lt;strong&gt;sip show peer leifmadsen_cell&lt;/strong&gt;&amp;rsquo; (or whatever you called your configuration.&lt;/p&gt;

&lt;p&gt;The next step up is to configure our Nokia device. These settings should likely be the same on both the E61i and the E71, but I&amp;rsquo;m working from a 400 series firmware on the E71, so your mileage may vary.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Menu &amp;gt; Tools &amp;gt; Settings &amp;gt; Connection &amp;gt; SIP Settings &amp;gt; Options &amp;gt; New SIP Profile &amp;gt; Use default profile&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;**
**&lt;/p&gt;

&lt;p&gt;With the new profile created, we need to modify it for connection to our Asterisk system. Starting at the top we have the following fields: Profile name, Service profile, Default access point, Public user name, Use compression, Registration, Use security, Proxy Server, and Registrar Server. We&amp;rsquo;ll going through each of these and configure the two submenus: Proxy Server and Registrar Server.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Profile name:&lt;/strong&gt; Anything you want. I called mine &amp;ldquo;Business Line&amp;rdquo;
&lt;strong&gt;Service profile:&lt;/strong&gt; _IETF
&lt;strong&gt;Default access point:&lt;/strong&gt; Select either a wifi connection or 3G connection. In my case I&amp;rsquo;m selecting &amp;ldquo;Rogers Internet&amp;rdquo;
&lt;strong&gt;Public user name:&lt;/strong&gt; _sip:leifmadsen_cell@pbx.my_asterisk&lt;em&gt;box.com&lt;/em&gt; (notice how leifmadsen_cell is the same as what we configured in sip.conf)
&lt;strong&gt;Use compression:&lt;/strong&gt; _No
&lt;strong&gt;Registration:&lt;/strong&gt; &lt;em&gt;Always on&lt;/em&gt; (you can set this to &amp;lsquo;When needed&amp;rsquo; if you only want to place outbound calls via VoIP sometimes)
&lt;strong&gt;Use security:&lt;/strong&gt; _No___&lt;/p&gt;

&lt;p&gt;**Proxy Server &amp;gt;
&lt;strong&gt;Proxy server address:&lt;/strong&gt; _pbx.my_asterisk_box.com
&lt;strong&gt;Realm:&lt;/strong&gt; _pbx.my_asterisk_box.com
&lt;strong&gt;Username:&lt;/strong&gt; _leifmadsen_cell
&lt;strong&gt;Password:&lt;/strong&gt; _super_secret_password
&lt;strong&gt;Allow loose routing:&lt;/strong&gt; _Yes
&lt;strong&gt;Transport type:&lt;/strong&gt; _UDP
&lt;strong&gt;Port:&lt;/strong&gt; &lt;em&gt;5060&lt;/em&gt; (unless you&amp;rsquo;ve changed this yourself on your Asterisk box)______**&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Back &amp;gt; Registrar server &amp;gt;
(fill this information out exactly like the Proxy server section)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;At this point, hit the &lt;strong&gt;Back&lt;/strong&gt; button a couple of times to make sure you phone will register. If you&amp;rsquo;re still having issues, double check all your configuration options, and potentially restart the phone. With older firmware versions I&amp;rsquo;ve had issues where if I don&amp;rsquo;t get it perfect the first time and make a change, I have to restart the phone.&lt;/p&gt;

&lt;p&gt;Once we see that we&amp;rsquo;ve registered the device, we need to enable it from another screen so that we can place and receive calls from Asterisk.&lt;/p&gt;

&lt;p&gt;Go back out of the SIP Settings screen to your Connection screen in the Tools menu, then select Internet tel.&lt;/p&gt;

&lt;p&gt;By default you will see a screen that says (no Internet telephone settings).&lt;/p&gt;

&lt;p&gt;Select the Options button and create a new profile. There will be two fields: Name and SIP profiles. By default the SIP profile field should be selected with Business Line (or whatever you called your SIP connection) automatically. The Name field is currently set to Default, but I just renamed it to VoIP. Feel free to name it anything you want.&lt;/p&gt;

&lt;p&gt;Back out of all your menus until you get back to the main screen. You should see an icon in the upper-right hand corner that looks like a telephone hand set on top of a globe. At this point, try dialing one of the extensions on your Asterisk server to see if things are working! I like to try calling my voicemail as it lets me test DTMF as well.&lt;/p&gt;

&lt;p&gt;Below is a (modified) INVITE from the E71 showing what you&amp;rsquo;ll see when the request comes from the phone. The most interesting part is the SDP portion which shows us which codecs the device supports and offers. In the case of the phone and firmware combination I&amp;rsquo;m using, I can use G.711 ulaw and alaw, G729, and iLBC.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;INVITE sip:8500@pbx.my_asterisk_server.com;user=phone SIP/2.0
Route:
Via: SIP/2.0/UDP 10.10.10.84:5060;branch=z9hG4bKlq60dckmalhc6vap06nosen;rport
From: ;tag=mh5gdciapphc6m6506no
To:
Contact:
Supported: 100rel,sec-agree
CSeq: 1252 INVITE
Call-ID: rdw6Iy8zoIfKxg6LzJ7FSPdgBvIb8y
Allow: INVITE,ACK,BYE,CANCEL,REFER,NOTIFY,OPTIONS,PRACK
Expires: 120
Privacy: none
User-Agent: E71-2 RM-346 400.21.013
P-Preferred-Identity: sip:leifmadsen_cell@pbx.my_asterisk_server.com
Max-Forwards: 70
Content-Type: application/sdp
Accept: application/sdp
Content-Length: 447

v=0
o=Nokia-SIPUA 63437257072703500 63437257072703500 IN IP4 10.10.10.84
s=-
c=IN IP4 10.10.10.84
t=0 0
m=audio 49152 RTP/AVP 96 0 8 97 18 98 13
a=sendrecv
a=ptime:20
a=maxptime:200
a=fmtp:96 mode-change-neighbor=1
a=fmtp:18 annexb=no
a=fmtp:98 0-15
a=rtpmap:96 AMR/8000/1
a=rtpmap:0 PCMU/8000/1
a=rtpmap:8 PCMA/8000/1
a=rtpmap:97 iLBC/8000/1
a=rtpmap:18 G729/8000/1
a=rtpmap:98 telephone-event/8000/1
a=rtpmap:13 CN/8000/1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So beyond that, there shouldn&amp;rsquo;t be anything else you need to do. Using the same configuration in sip.conf for Asterisk should also work with Fring. Perhaps I&amp;rsquo;ll create another blog post in the future about using Fring with E71 if there is interest in that. Anyone who wants to try testing out some video calls through my Asterisk box using their Fring video enabled phone, just let me know offline and we&amp;rsquo;ll set something up!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>New headset thanks to e4voip.com!</title>
      <link>http://blog.leifmadsen.com/blog/2010/02/22/new-headset-thanks-to-e4voip.com/</link>
      <pubDate>Mon, 22 Feb 2010 19:04:21 +0000</pubDate>
      
      <guid>http://blog.leifmadsen.com/blog/2010/02/22/new-headset-thanks-to-e4voip.com/</guid>
      <description>&lt;p&gt;Just got my new Plantronics headset from &lt;a href=&#34;http://www.e4voip.com&#34;&gt;http://www.e4voip.com&lt;/a&gt; (or rather, the hardware store at &lt;a href=&#34;http://www.8774e4voip.com/&#34;&gt;http://www.8774e4voip.com/&lt;/a&gt;) and am extremely satisfied with the service. We had an issue with Purolator not wanting to deliver to the building and then not bothering to call me to let me know the address was incorrect. By the time I noticed and got the address corrected, they just decided to send back the package.&lt;/p&gt;

&lt;p&gt;So after letting the guys at e4VoIP know what happened, they just drop shipped a headset via FedEx overnight and I had it by lunch the next day! Amazing service and great prices. I&amp;rsquo;m in Canada, so I know how much of a pain in the ass shipping across the border is, and usually there is a bunch of duty fees across the border, but this time around the headset didn&amp;rsquo;t cost me a thing.&lt;/p&gt;

&lt;p&gt;I plan on getting a G.722 capable phone next because now that I have this headset attached to my Polycom, I&amp;rsquo;m kind of looking forward to high quality calls during the weekly VoIP Users Conference call! (&lt;a href=&#34;http://www.vuc.me&#34;&gt;http://www.vuc.me&lt;/a&gt;)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Interview from Wind Mobile launch</title>
      <link>http://blog.leifmadsen.com/blog/2010/02/09/interview-from-wind-mobile-launch/</link>
      <pubDate>Tue, 09 Feb 2010 22:10:44 +0000</pubDate>
      
      <guid>http://blog.leifmadsen.com/blog/2010/02/09/interview-from-wind-mobile-launch/</guid>
      <description>&lt;p&gt;I was interviewed at the Wind Mobile launch a couple of months ago, and was interviewed by an online publication. I didn&amp;rsquo;t remember which online publication it was, so had forgotten all about it until I noticed someone had posted a link to it in the on-asterisk mailing list. Enjoy!&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Wind Mobile launches with contract-free, unlimited plans&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Globalive&amp;rsquo;s Wind Mobile brand is officially live in Toronto and will soon be opening its doors in Calgary and other Canadian cities. The company&amp;rsquo;s pricing plans target some of the most disliked aspects of existing cell phone companies&amp;rsquo; practices.
12/17/2009 5:00:00 AM By: Brian Jackson&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.itbusiness.ca/it/client/en/home/News.asp?id=55769&amp;amp;PageMem=1&#34;&gt;http://www.itbusiness.ca/it/client/en/home/News.asp?id=55769&amp;amp;PageMem=1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For a link directly to the video with me in it, check it out here: &lt;a href=&#34;http://www.itbusiness.ca/it/client/en/home/SingleVideo.asp?bcpid=1909906767&amp;amp;bctid=57891029001&#34;&gt;http://www.itbusiness.ca/it/client/en/home/SingleVideo.asp?bcpid=1909906767&amp;amp;bctid=57891029001&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Suzanne Bowen Interviews Leif Madsen, Asterisk Rockstar</title>
      <link>http://blog.leifmadsen.com/blog/2009/07/30/suzanne-bowen-interviews-leif-madsen-asterisk-rockstar/</link>
      <pubDate>Thu, 30 Jul 2009 22:11:17 +0000</pubDate>
      
      <guid>http://blog.leifmadsen.com/blog/2009/07/30/suzanne-bowen-interviews-leif-madsen-asterisk-rockstar/</guid>
      <description>&lt;p&gt;Today I had the privilege to be interviewed by &lt;a href=&#34;http://www.twitter.com/suzannebowen&#34;&gt;Suzanne Bowen&lt;/a&gt; of &lt;a href=&#34;http://www.didx.net&#34;&gt;DIDX&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You can find the interview at &lt;a href=&#34;http://www.didx.net/podcast/?p=episode&amp;amp;name=2009-07-30_leifmadsenjul312009.mp3&#34;&gt;http://www.didx.net/podcast/?p=episode&amp;amp;name=2009-07-30_leifmadsenjul312009.mp3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hope you enjoy!&lt;/p&gt;

&lt;p&gt;Here is a description of the interview:&lt;/p&gt;

&lt;p&gt;&amp;ldquo;Truth is that I &amp;ldquo;met&amp;rdquo; the authors of the book &amp;ldquo;&lt;a href=&#34;http://www.asteriskdocs.org&#34;&gt;Asterisk, the Future of Telephony&lt;/a&gt;&amp;rdquo; when I was an English teacher and had volunteered over email to help edit the documentation. It was a joy to interview Leif Madsen. The Asterisk rockstar* shares with us the history of how he became interested in voice, telephony, Asterisk and open source.&lt;/p&gt;

&lt;p&gt;We discussed the &amp;ldquo;cliques or special interest groups&amp;rdquo; in telecommunications, in fact three.
1. Old style, keep it closed, don&amp;rsquo;t share, beat the competition, sell it at an inflated price, and it&amp;rsquo;s all about the money.
2. It should all be free and if you are not offering it free, you&amp;rsquo;re not one of us.
3. With a happy medium area of those who realize that people do need a paycheck to take care of their lives. At the same time, be willing to give back in an open source manner. Like a compromise!&lt;/p&gt;

&lt;p&gt;Advice for entrepreneurs&amp;hellip; Leif says he&amp;rsquo;s more a technical guy but he definitely did not want to work for someone else and being in your own business assures that. You must create content that is of value to other people. For him, it worked with his documentation projects such as the &lt;a href=&#34;http://www.oreilly.com&#34;&gt;O&amp;rsquo;Reilly&lt;/a&gt; book and he&amp;rsquo;s now a successful Asterisk consultant and author.&lt;/p&gt;

&lt;p&gt;Websites he uses most? news.google.com and &lt;a href=&#34;http://www.twitter.com/leifmadsen&#34;&gt;Twitter!&lt;/a&gt; Also Asterisk IRC channel.&lt;/p&gt;

&lt;p&gt;Who inspires Leif Madsen? James Shaw, his friend since age 17 when Leif took Jim&amp;rsquo;s place working on at a computer store. Second one is Jim Van Meggelen. Leif describes him as a guy who can make you laugh and enjoy life, not a workoholic, and a good example for public speaking.&lt;/p&gt;

&lt;p&gt;What do people ask him most often about the O&amp;rsquo;Reilly book? When are you going to write a new version? And that&amp;rsquo;s tough because Asterisk is progressing fast with changes by the second.&lt;/p&gt;

&lt;p&gt;Leif will be at &lt;a href=&#34;http://www.astricon.net&#34;&gt;Astricon&lt;/a&gt; Oct 13-15, 2009 in Glendale. He will be &lt;a href=&#34;http://www.astricon.net/confDescriptions.aspx?t=CC#CC-01&#34;&gt;speaking&lt;/a&gt; 10 AM on Oct. 14, 2009. He usually attends &lt;a href=&#34;http://www.it360.ca&#34;&gt;IT360&lt;/a&gt; in Toronto every year. You can learn from him, contact him, do business with him at &lt;a href=&#34;http://www.leifmadsen.com&#34;&gt;http://www.leifmadsen.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You can listen to other podcast interviews on DIDX podcasts at &lt;a href=&#34;http://www.didx.net/podcast&#34;&gt;http://www.didx.net/podcast&lt;/a&gt;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;After polling 11 people how I should define Leif, 10 said, they voted rockstar.&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>